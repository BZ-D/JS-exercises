#### 基础运算符 +、%、**

- 两个布尔值相加或数值与布尔值相加，布尔值转为数值类型

- 两个字符串相加，实际上是连接操作

- 如果一个运算子是字符串，另一个运算子是非字符串，将非字符串转化为字符串后连接

  - `true + 'string1' === 'truestring1'`
  - `'3' + 4 + 5 === '345'`
  - `3 + 4 + '5' === '75'`

- 如果运算子是对象，必须先转换成原始类型的值然后再相加

  ```js
  var obj = { p: 1 };
  obj + 2 // "[object Object]2"
  // obj原始类型为[object Object]
  // 首先自动调用对象的valueof方法
  obj.valueOf()
  // 一般来说，对象的valueOf方法总是返回对象自身，这时再自动调用对象的toString方法，将其转换为字符串
  obj.valueOf().toString()
  // 也可以自己定义valueOf方法或toString方法，得到想要的结果
  ```

- 取余符号 `%` 运算结果的正负性取决于第一个运算子的正负性

  - 1 % 2 === 1
  - -1 % 2 === -1
  - 1 % -2 === 1
  - 因此，为了得到负数的正确余数值，可以先使用绝对值函数

- 指数运算符 `**` 是右结合：

  - 2 *\* 4 = 16
  - 2 \** 3 \** 2 === 2 \** 9 === 512



#### 比较运算符 == != === !==

- 非相等运算符 != 的比较流程：
  - 先看两个运算子是否都是字符串，如果是，按字典序比较(实际上是比较Unicode码点)
    - 'cat' > 'Cat' => true
  - 否则将两个运算子都转换成数值，再比较数值的大小
    - 5 > '4' => true
    - true > false => 1 > 0 => true
  - 任何数（包括NaN本身）与NaN比较，返回都是false
  - 如果运算子是对象，先调用 valueOf 方法，如果返回的还是对象，再接着调用 toString 方法
    - [2] > [1] => '2' > '1' => true
    - [2] > [11] => '2' > '11' => true
    - { x: 2 } >= { x: 1 } 即 '[object Object]' >= '[object Object]'
- 严格相等运算符 === 和相等运算符 ==
  - 相等运算符 == 会将运算子转换成同一类型，再用 === 进行比较，含有隐藏的类型转换
    - 相等运算符用来比较相同类型数据时，与 === 完全一样
    - 对于原始类型值会转换为数值再进行比较
      - 1 == true       // true
      - 0 == false      // true
      - 'true' == true  // false，等同于 NaN === 1
      - '' === false    // true，等同于 0 === 0
      - '\n  123  \t' === 123  // true，字符串转数字时，省略前置和后置空格
  - 而严格相等运算符 === 对于非同一类型的运算子直接返回 false
  - 对于复合类型运算子比较，则比较二者的地址
    - {} === {}  false
    - var v1 = {};  var v2 = v1;  v1 === v2  // true
    - 注意，对于 > 或 <，比较的是值而非地址
  - undefined 和 null 与自身严格相等
    - 由于变量声明后默认为 undefined，因此两个只声明未赋值的变量是严格相等的
    - undefined == undefined  // true
    - undefined == null  // true

- 取反运算符 !
  - 只有以下六个值取反后为 true，其余都为 false
    - NaN, undefined, 0, false, null, ''
  - 将一个值转为布尔值的简便写法：两次取反
    - `!!x`



#### 位运算符

位运算符只对整数起作用，而在JS内部，所有数值类型都会以64位浮点数形式存储，因此位运算时会先把数值转换为32位整数再进行运算。

```js
function toInt32 (x) {
    return x | 0;
}

2.9 | 0  // 2
-2.9 | 0  // -2
```

该函数将任意值与 0 进行一次或运算，会自动将值转为 32 位整数

- 二进制否运算遇到小数是也会舍去小数部分，而对一个数两次取否得到其本身，因此否运算符也可以用于取整：`~~x`

- 异或运算符的巧用：

  - 计算 `x + 1(x 为偶数)` 和 `x - 1(x 为奇数)` 时，可以用 `x ^ 1` 来代替

  - 连续对两个数 a 和 b 进行三次异或运算，可以互换它们的值：

    ```js
    a ^= b;
    b ^= a;
    a ^= b;
    ```

  - 用于取整：`x ^ 0`

- 左移运算符用于取整：`x << 0`

- 头部补零右移运算符 `>>>`

  - `-1 >>> 0` 将会得到 `4294967295`，即 `2 ^ 32 - 1`

- 位运算符可用于设置对象属性的开关，也可用于模拟字母的使用情况

- 运算符的右结合性：以下运算符是右结合的

  - w = x = y = z  即 w = (x = (y = z))
  - q = a ? b : c ? d : e ? f : g 即 q = a ? b : (c ? d : (e ? f : g))
  - 指数运算符 *\* 

